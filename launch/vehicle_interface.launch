<?xml version="1.0" encoding="UTF-8"?>
<launch>

  <arg name="use_kvaser" default="true"/>
  <arg name="kvaser_hardware_id" default="$(env KVASER_HARDWARE_ID)"/>
  <arg name="use_ssc" default="false"/>

  <arg name="max_throttle" default="0.4"/>
  <arg name="max_brake" default="0.8"/>

  <arg name="pacmod_param_path" default="$(find as)/config/pacmod_param.yaml"/>

  <!-- pacmod3 -->
  <!-- 
  <group ns="pacmod">
    <include file="$(find pacmod3)/launch/pacmod3.launch">
      <arg name="pacmod_vehicle_type" value="LEXUS_RX_450H"/>
      <arg name="use_kvaser" value="$(arg use_kvaser)"/>
      <arg name="kvaser_hardware_id" value="$(arg kvaser_hardware_id)"/>
    </include>
  </group>
  -->

  <group ns="pacmod">
    <include file="$(find pacmod3)/launch/pacmod3.launch">
      <arg name="pacmod_vehicle_type" value="LEXUS_RX_450H"/>
    </include>
    <!-- /opt/ros/melodic/share/kvaser_interface/launch/kvaser_can_bridge.launch -->
    <node pkg="kvaser_interface" type="kvaser_can_bridge" name="kvaser_can_bridge" output="screen" if="$(arg use_kvaser)">
      <param name="can_hardware_id" value="65359" />
      <param name="can_circuit_id" value="0" />
      <param name="can_bit_rate" value="500000" />
    </node>
  </group>

  <!-- ssc -->
  <include file="$(find ssc_pm_lexus)/launch/speed_steering_control.launch" if="$(eval use_ssc==true)">
    <arg name="namespace" value="as"/>
  </include>

  <!-- ssc_interface -->
  <include file="$(find as)/launch/ssc_interface.launch" if="$(eval use_ssc==true)"/>

  <!-- raw_vehicle_converter -->
  <include file="$(find raw_vehicle_cmd_converter)/launch/raw_vehicle_converter.launch" if="$(eval use_ssc==false)">
    <arg name="max_throttle" value="$(arg max_throttle)"/>
    <arg name="max_brake" value="$(arg max_brake)"/>
  </include>

  <!-- pacmod_interface -->
  <include file="$(find as)/launch/pacmod_interface.launch" if="$(eval use_ssc==false)">
    <arg name="pacmod_param_path" value="$(arg pacmod_param_path)"/>
  </include>

</launch>
